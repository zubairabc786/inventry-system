(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{8957:function(e,a,t){Promise.resolve().then(t.bind(t,4738))},4738:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return s}});var n=t(7437),c=t(8078),r=t(2265),d=t(4033);function s(e){var a;let{params:t}=e,{doc_id:s}=t,[l,u]=(0,r.useState)([]),[o,i]=(0,r.useState)([]),[f,b]=(0,r.useState)(0),[m,x]=(0,r.useState)(0),[p,h]=(0,r.useState)(0),[N,v]=(0,r.useState)([]),j=(0,d.useRouter)();function y(e){let a=e.reduce((e,a)=>e+Number(a.quantity),0),t=e.length,n=e.reduce((e,a)=>e+a.quantity*a.price,0);x(a),h(t),b(n)}function _(e,a,t){let n=[...o];n[e][a]=t,n[e].amount=n[e].quantity*n[e].price,i(n),y(n)}async function g(e){e.set("grandTotal",f),e.set("totalQty",m),e.set("totalItems",p),e.set("items",JSON.stringify(o)),e.set("deletedItems",JSON.stringify(N)),await (0,c.OG)(e),j.push("/purchase-detail")}return(0,r.useEffect)(()=>{(async function(){let e=await (0,c.ie)(s);u(e),i(e.Purchase||[]),y(e.Purchase||[])})()},[s]),(0,n.jsxs)("form",{action:g,className:"space-y-2 max-w-3xl mx-auto ",children:[(0,n.jsx)("h1",{className:"my-4 text-4xl md:text-2xl lg:text-5xl font-extrabold tracking-tight text-center animate-fade-in animate-color-shift",children:(0,n.jsx)("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 via-green-500 to-purple-500",children:"Edit Purchase Details"})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("label",{className:"font-bold p-2",children:"Doc Id:-"}),(0,n.jsx)("input",{className:"border p-2",name:"doc_id",defaultValue:l.doc_id,readOnly:!0})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("label",{className:"font-bold p-2",children:"Invoice No:-"}),(0,n.jsx)("input",{name:"invoice_no",className:"border p-2",defaultValue:l.invoice_no})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("label",{className:"font-bold p-2",children:"Purchase Code:-"}),(0,n.jsx)("input",{name:"purchase_code",className:"border p-2",defaultValue:null===(a=l.COA)||void 0===a?void 0:a.account_code})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("label",{className:"font-bold p-2",children:"Date:-"}),(0,n.jsx)("input",{type:"date",name:"dated",className:"border p-2",defaultValue:l.dated?new Date(l.dated).toISOString().slice(0,10):""})]})]}),(0,n.jsxs)("div",{className:" max-w-3xl mx-auto grid grid-cols-6 gap-1",children:[(0,n.jsx)("label",{className:"font-bold",children:"Product Code"}),(0,n.jsx)("label",{className:"font-bold",children:"Quantity"}),(0,n.jsx)("label",{className:"font-bold",children:"Price"}),(0,n.jsx)("label",{className:"font-bold",children:"Remarks"}),(0,n.jsx)("label",{className:"font-bold",children:"Amount"})]}),o.map((e,a)=>(0,n.jsxs)("div",{className:" max-w-3xl mx-auto grid grid-cols-6 gap-2 ",children:[(0,n.jsx)("input",{className:"border p-2",name:"product_code_".concat(a),value:e.product_code,onChange:e=>_(a,"product_code",e.target.value)}),(0,n.jsx)("input",{className:"border",name:"quantity_".concat(a),value:e.quantity,type:"number",onChange:e=>_(a,"quantity",e.target.value)}),(0,n.jsx)("input",{className:"border",name:"price_".concat(a),value:e.price,type:"number",onChange:e=>_(a,"price",e.target.value)}),(0,n.jsx)("input",{className:"border p-2",name:"remarks_".concat(a),value:e.remarks,onChange:e=>_(a,"remarks",e.target.value)}),(0,n.jsx)("input",{className:"border p-2",name:"amount_".concat(a),value:e.amount,readOnly:!0}),(0,n.jsx)("button",{type:"button",onClick:()=>(function(e){v([...N,e]);let a=o.filter(a=>a.id!==e);i(a),y(a)})(e.id),className:"bg-red-500 text-white rounded p-2",children:"Delete"})]},e.id)),(0,n.jsxs)("div",{children:["Grand Total:-",f]}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{type:"submit",className:"bg-blue-700  text-white px-4 py-2 rounded mt-4 flex justify-center",children:"Update Purchase"})})]})}},8078:function(e,a,t){"use strict";t.d(a,{$K:function(){return j},C$:function(){return s},Do:function(){return g},Ey:function(){return i},K6:function(){return x},Ks:function(){return d},OD:function(){return v},OG:function(){return b},Xp:function(){return u},Y$:function(){return _},cY:function(){return r},dH:function(){return y},gM:function(){return h},ie:function(){return f},oN:function(){return N},r4:function(){return c},ry:function(){return l},vA:function(){return m},xg:function(){return o},zV:function(){return p}}),t(5355);var n=t(1162),c=(0,n.$)("091d73d95320b036c57ef7d96d5e05ab7311a613"),r=(0,n.$)("cb4f4b774b9d88b3c534434328e16fcbad7a9269"),d=(0,n.$)("6ca0d13716ec2e1de55299573eab2a5058b37b08"),s=(0,n.$)("0f43a19a198e50d66f8812d5c82ec5ce51a2f043"),l=(0,n.$)("42fa3d8a19af81e5b592d3f23d853b67b72711d9"),u=(0,n.$)("e96912272c67976ddd4249bc8ffb96d731a7bf50"),o=(0,n.$)("8dc13c579d855e7071caf38e0aca70c0929d46eb"),i=(0,n.$)("c93ab26931ca5734d5e62318905e2804181cb60a");(0,n.$)("4c809af6775a8bcc983e051c557925a929b83421"),(0,n.$)("f2b90191f662ed14e70f2489c6a5fa375a55291d");var f=(0,n.$)("f52e47321e04054eca09b13a02ffa54c11e5ff02"),b=(0,n.$)("b93a02faedcd35fa57d2264e59e1e5410f2f7040"),m=(0,n.$)("f5b6016afb0036b672a9f51a7dabee39e721b800");(0,n.$)("d471c79f1681404af2366afb867205d40261192f");var x=(0,n.$)("af28085dac97ece90a9b47c2b651a736367cd566"),p=(0,n.$)("382cffa6fab359d0e100dfc1f8ca2ce0d621a801"),h=(0,n.$)("c581f3dd1f7d38ed7cae01b669acf535a04e3572"),N=(0,n.$)("4e687357918295a68f0b3d1b4d5434d1c3f82501"),v=(0,n.$)("52c194031b9970623c85b0a24c424c974c8cefec"),j=(0,n.$)("51ce2a1c9289abbc06b012664d6a439ad3deb4e6"),y=(0,n.$)("11a235eb1d04e541768b31e6f21a7d7a17a567a9");(0,n.$)("134ebd23ed5d7398731a79af0c130c1ba5e720b1");var _=(0,n.$)("c18c8b12a7e0de24f9d14dfe249593a85ff347b9"),g=(0,n.$)("09a35ed028ace98a546c7941d82389dedd03aca0");(0,n.$)("da7ec353ccbd534acbfb4a33d31ef910814f3f10"),(0,n.$)("39c789efd65e411bdad465608ed5b232e577a748")},1162:function(e,a,t){"use strict";Object.defineProperty(a,"$",{enumerable:!0,get:function(){return c}});let n=t(5355);function c(e){let{createServerReference:a}=t(6671);return a(e,n.callServer)}},622:function(e,a,t){"use strict";var n=t(2265),c=Symbol.for("react.element"),r=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,a,t){var n,r={},u=null,o=null;for(n in void 0!==t&&(u=""+t),void 0!==a.key&&(u=""+a.key),void 0!==a.ref&&(o=a.ref),a)d.call(a,n)&&!l.hasOwnProperty(n)&&(r[n]=a[n]);if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===r[n]&&(r[n]=a[n]);return{$$typeof:c,type:e,key:u,ref:o,props:r,_owner:s.current}}a.Fragment=r,a.jsx=u,a.jsxs=u},7437:function(e,a,t){"use strict";e.exports=t(622)},4033:function(e,a,t){e.exports=t(5313)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=8957)}),_N_E=e.O()}]);