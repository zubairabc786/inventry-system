exports.id=501,exports.ids=[501],exports.modules={6596:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,6840,23)),Promise.resolve().then(a.t.bind(a,8771,23)),Promise.resolve().then(a.t.bind(a,3225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,3982,23))},5161:()=>{},7483:(e,t,a)=>{"use strict";a.d(t,{$K:()=>P,C$:()=>n,Do:()=>A,Ey:()=>l,K6:()=>b,Ks:()=>o,OD:()=>w,OG:()=>_,Xp:()=>i,Y$:()=>M,cY:()=>r,dH:()=>g,gM:()=>h,ie:()=>f,oN:()=>m,r4:()=>d,ry:()=>u,vA:()=>p,xg:()=>s,zV:()=>y}),a(3664);var c=a(8371),d=(0,c.$)("091d73d95320b036c57ef7d96d5e05ab7311a613"),r=(0,c.$)("cb4f4b774b9d88b3c534434328e16fcbad7a9269"),o=(0,c.$)("6ca0d13716ec2e1de55299573eab2a5058b37b08"),n=(0,c.$)("0f43a19a198e50d66f8812d5c82ec5ce51a2f043"),u=(0,c.$)("42fa3d8a19af81e5b592d3f23d853b67b72711d9"),i=(0,c.$)("e96912272c67976ddd4249bc8ffb96d731a7bf50"),s=(0,c.$)("8dc13c579d855e7071caf38e0aca70c0929d46eb"),l=(0,c.$)("c93ab26931ca5734d5e62318905e2804181cb60a");(0,c.$)("4c809af6775a8bcc983e051c557925a929b83421"),(0,c.$)("f2b90191f662ed14e70f2489c6a5fa375a55291d");var f=(0,c.$)("f52e47321e04054eca09b13a02ffa54c11e5ff02"),_=(0,c.$)("b93a02faedcd35fa57d2264e59e1e5410f2f7040"),p=(0,c.$)("f5b6016afb0036b672a9f51a7dabee39e721b800");(0,c.$)("d471c79f1681404af2366afb867205d40261192f");var b=(0,c.$)("af28085dac97ece90a9b47c2b651a736367cd566"),y=(0,c.$)("382cffa6fab359d0e100dfc1f8ca2ce0d621a801"),h=(0,c.$)("c581f3dd1f7d38ed7cae01b669acf535a04e3572"),m=(0,c.$)("4e687357918295a68f0b3d1b4d5434d1c3f82501"),w=(0,c.$)("52c194031b9970623c85b0a24c424c974c8cefec"),P=(0,c.$)("51ce2a1c9289abbc06b012664d6a439ad3deb4e6"),g=(0,c.$)("11a235eb1d04e541768b31e6f21a7d7a17a567a9");(0,c.$)("134ebd23ed5d7398731a79af0c130c1ba5e720b1");var M=(0,c.$)("c18c8b12a7e0de24f9d14dfe249593a85ff347b9"),A=(0,c.$)("09a35ed028ace98a546c7941d82389dedd03aca0");(0,c.$)("da7ec353ccbd534acbfb4a33d31ef910814f3f10"),(0,c.$)("39c789efd65e411bdad465608ed5b232e577a748")},2913:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CoaDetail:()=>f,createCOA:()=>l,createJournal:()=>I,createProduct:()=>_,createPurchaseSheet:()=>y,createUser:()=>q,deleteInventMasterPurchase:()=>M,deleteJornalMaster:()=>J,getAllJournalsDV:()=>D,getAllJournalsJV:()=>O,getDashboardData:()=>E,getDropdownData:()=>h,getDropdownDataJornal:()=>C,getInventWithPurchase:()=>m,getInventWithSale:()=>w,getJournalById:()=>x,getJournalEntries:()=>$,getJournalEntries1:()=>S,getProducts:()=>p,getPurchaseByDocId:()=>P,getStockTable:()=>A,getStockTableLessFive:()=>V,getTrialBalance:()=>F,lastCOA:()=>s,updateJournal:()=>k,updatePurchaseByDocId:()=>g});var c=a(8601);a(5811);var d=a(1903),r=a(4276),o=a(6412),n=a(8462),u=a(6893);let i=o.z.object({account_code:o.z.string(),account_name:o.z.string(),contact_no:o.z.coerce.number(),address:o.z.string()});async function s(){let e=await d.default.COA.findFirst({orderBy:{account_code:"desc"}});return e?(parseInt(e.account_code,10)+1).toString():"20010001"}async function l(e){let t=await s(),a=i.safeParse({account_code:t,account_name:e.get("account_name"),contact_no:e.get("contact_no"),address:e.get("address")});return a.success?{success:!0,result:await d.default?.COA.create({data:a.data})}:{error:a.error.flatten()}}async function f(){return await d.default.COA.findMany()||(0,r.notFound)()}async function _(e){try{let t=await d.default.Product.findFirst({orderBy:{product_code:"desc"}}),a=t?parseInt(t.product_code)+1:2001,c={product_code:a.toString(),product_name:e.get("product_name"),product_type:e.get("product_type"),sku:"sku:"+a.toString(),purchase_price:parseFloat(e.get("purchase_price")),prophit_percent:parseFloat(e.get("prophit_percent")),price:parseFloat(e.get("price"))};if(isNaN(c.purchase_price)||isNaN(c.prophit_percent)||isNaN(c.price))throw Error("Invalid numeric values in form data");let r=await d.default.Product.create({data:c});return{success:!0,newCode:a.toString(),nextProductCode:a,product:r}}catch(e){return console.error("Error creating product:",e),{success:!1,message:e.message||"Failed to create product"}}}async function p(){return await d.default.Product.findMany({select:{product_code:!0,product_name:!0,product_type:!0,sku:!0,purchase_price:!0,prophit_percent:!0,price:!0}})||(0,r.notFound)()}async function b(){let e=await d.default.InventMaster.findFirst({orderBy:{doc_id:"desc"}});return e?e.doc_id+1:1}async function y(e){let t=await b(),a=e.get("doc_type"),c=parseFloat(e.get("calculated_discount")),r=e.get("purchase_code"),o=new Date(e.get("dated")),n=JSON.parse(e.get("items")).map(e=>{let t=parseFloat(e.quantity),c=parseFloat(e.price);return{product_code:e.product_code,quantity:t,price:c,amount:t*c,remarks:e.remarks||"",doc_type:a}}),u=n.reduce((e,t)=>e+t.quantity,0),i=n.length,s=n.reduce((e,t)=>e+t.amount,0);return await d.default.InventMaster.create({data:{invoice_no:Math.floor(1e5*Math.random()),doc_id:t,purchase_code:r,doc_type:a,dated:o,Purchase:{create:n.map(e=>({...e,total_qty:u,total_item:i,calculated_discount:c||0,grandTotal:s-(c||0)}))}}}),{success:!0,doc_id:t}}async function h(){return{coaList:await d.default.COA.findMany({select:{account_code:!0,account_name:!0}}),productList:await d.default.Product.findMany({select:{product_code:!0,product_name:!0,price:!0,purchase_price:!0}})}}async function m(){try{return await d.default.inventMaster.findMany({include:{COA:!0,Purchase:{include:{Product:!0}}},where:{doc_type:"PV"},orderBy:{createdAt:"asc"}})}catch(e){return console.error("Error fetching InventMaster data:",e.message),[]}}async function w(){try{return await d.default.inventMaster.findMany({include:{COA:!0,Purchase:{include:{Product:!0}}},where:{doc_type:"SV"},orderBy:{createdAt:"asc"}})}catch(e){return console.error("Error fetching InventMaster data:",e.message),[]}}async function P(e){return await d.default.InventMaster.findUnique({where:{doc_id:Number(e)},include:{COA:!0,Purchase:{include:{Product:!0}}}})}async function g(e){let t=Number(e.get("doc_id")),a=parseFloat(e.get("grandTotal")),c=parseInt(e.get("totalQty")),r=parseInt(e.get("totalItems"));await d.default.InventMaster.update({where:{doc_id:t},data:{invoice_no:Number(e.get("invoice_no")),purchase_code:e.get("purchase_code"),dated:new Date(e.get("dated"))}});let o=JSON.parse(e.get("items")),n=JSON.parse(e.get("deletedItems"));for(let e of(n&&n.length>0&&await d.default.Purchase.deleteMany({where:{id:{in:n}}}),o))await d.default.Purchase.update({where:{id:e.id},data:{product_code:e.product_code,quantity:parseFloat(e.quantity),price:parseFloat(e.price),amount:parseFloat(e.amount),remarks:e.remarks,total_qty:c,total_item:r,grandTotal:a}});return{success:!0}}async function M(e){try{return await d.default.purchase.deleteMany({where:{doc_id:e}}),await d.default.inventMaster.delete({where:{doc_id:e}}),{success:!0}}catch(e){return{success:!1,error:e.message}}}async function A(){let e=await d.default.Purchase.groupBy({by:["product_code"],where:{doc_type:"PV"},_sum:{quantity:!0}}),t=await d.default.Purchase.groupBy({by:["product_code"],where:{doc_type:"SV"},_sum:{quantity:!0}}),a={};for(let e of t)a[e.product_code]=e._sum.quantity||0;let c=[];for(let t of e){let e=await d.default.Product.findUnique({where:{product_code:t.product_code}}),r=t._sum.quantity||0,o=a[t.product_code]||0,n=r-o;c.push({item_code:t.product_code,item_name:e?.product_name||"",Purchase:r,Sale:o,Stock:n,doc_type:"Stock"})}return c}let v=async()=>{let e=await d.default.JornalMst.findFirst({orderBy:{doc_id:"desc"},select:{doc_id:!0}});return e?e.doc_id+1:1};async function I(e){let{doc_type:t,dated:a,remarks:c,details:r}=e,o=await v();return await d.default.JornalMst.create({data:{doc_id:o,doc_type:t,dated:new Date(a),remarks:c,JornalDtl:{create:r.map(e=>({account_code:e.account_code,doc_type:t,debit:parseFloat(e.debit),credit:parseFloat(e.credit),remarks:e.remarks}))}}}),{success:!0,doc_id:o}}async function C(){return{coaList:await d.default.COA.findMany({select:{account_code:!0,account_name:!0}})}}async function O(){return await d.default.JornalMst.findMany({orderBy:{doc_id:"asc"},include:{JornalDtl:{include:{COA:!0}}},where:{doc_type:"JV"}})}async function D(){return await d.default.JornalMst.findMany({orderBy:{doc_id:"asc"},include:{JornalDtl:{include:{COA:!0}}},where:{doc_type:"DV"}})}async function J(e){try{return await d.default.JornalDtl.deleteMany({where:{doc_id:e}}),await d.default.JornalMst.delete({where:{doc_id:e}}),{success:!0}}catch(e){return{success:!1,error:e.message}}}async function x(e){return await d.default.JornalMst.findUnique({where:{doc_id:parseInt(e)},include:{JornalDtl:!0}})}async function k(e,t){let{doc_type:a,dated:c,remarks:r,details:o}=t;return await d.default.JornalDtl.deleteMany({where:{doc_id:parseInt(e)}}),await d.default.JornalMst.update({where:{doc_id:parseInt(e)},data:{doc_type:a,dated:new Date(c),remarks:r,JornalDtl:{create:o.map(e=>({account_code:e.account_code,doc_type:a,debit:parseFloat(e.debit),credit:parseFloat(e.credit),remarks:e.remarks}))}}}),{success:!0}}async function $(){let e=await d.default.Purchase.findMany({include:{InventMaster:{include:{COA:!0}}},where:{doc_type:"PV"}}),t=await d.default.Purchase.findMany({include:{InventMaster:{include:{COA:!0}}},where:{doc_type:"SV"}}),a=await d.default.JornalDtl.findMany({include:{JornalMst:!0,COA:!0}}),c=[];e.forEach(e=>{c.push({account_code:e.InventMaster.COA.account_code,account_name:e.InventMaster.COA.account_name,date:e.InventMaster.dated,doc_type:e.doc_type,debit:e.amount,credit:0,remarks:e.remarks||""})}),t.forEach(e=>{c.push({account_code:e.InventMaster.COA.account_code,account_name:e.InventMaster.COA.account_name,date:e.InventMaster.dated,doc_type:e.doc_type,debit:0,credit:e.amount,remarks:e.remarks||""})}),a.forEach(e=>{c.push({account_code:e.account_code,account_name:e.COA.account_name,date:e.JornalMst.dated,doc_type:e.doc_type,debit:e.debit,credit:e.credit,remarks:e.remarks||""})}),c.sort((e,t)=>e.account_code!==t.account_code?e.account_code.localeCompare(t.account_code):new Date(e.date)-new Date(t.date));let r=[],o={};return c.forEach(e=>{o[e.account_code]||(o[e.account_code]=0),o[e.account_code]+=e.debit-e.credit,r.push({...e,balance:o[e.account_code]})}),r}async function F(){try{let e=await $(),t={};e.forEach(e=>{t[e.account_code]||(t[e.account_code]={doc_type:e.doc_type,account_code:e.account_code,account_name:e.account_name,debit:0,credit:0,balance:0}),"SV"===e.doc_type?t[e.account_code].debit+=e.credit:"PV"===e.doc_type?t[e.account_code].credit+=e.debit:(t[e.account_code].debit+=e.debit,t[e.account_code].credit+=e.credit),t[e.account_code].balance=t[e.account_code].debit-t[e.account_code].credit});let a=Object.values(t).sort((e,t)=>e.account_code.localeCompare(t.account_code)),c={account_code:"TOTAL",account_name:"",debit:a.reduce((e,t)=>e+t.debit,0),credit:a.reduce((e,t)=>e+t.credit,0),balance:0,doc_type:""};return a.push(c),a}catch(e){throw console.error("Error generating trial balance:",e),Error("Failed to generate trial balance")}}async function S(e="",t=null,a=null){let c=t&&a?{dated:{gte:new Date(t),lte:new Date(a)}}:{},[r,o,n]=await Promise.all([d.default.Purchase.findMany({include:{InventMaster:{include:{COA:!0}}},where:{doc_type:"PV",InventMaster:c}}),d.default.Purchase.findMany({include:{InventMaster:{include:{COA:!0}}},where:{doc_type:"SV",InventMaster:c}}),d.default.JornalDtl.findMany({include:{JornalMst:!0,COA:!0},where:t&&a?{JornalMst:{dated:{gte:new Date(t),lte:new Date(a)}}}:{}})]),u=[];r.forEach(e=>{u.push({account_code:e.InventMaster.COA.account_code,account_name:e.InventMaster.COA.account_name,date:e.InventMaster.dated,doc_type:e.doc_type,debit:0,credit:e.amount,remarks:e.remarks||""})}),o.forEach(e=>{u.push({account_code:e.InventMaster.COA.account_code,account_name:e.InventMaster.COA.account_name,date:e.InventMaster.dated,doc_type:e.doc_type,debit:e.amount,credit:0,remarks:e.remarks||""})}),n.forEach(e=>{u.push({account_code:e.account_code,account_name:e.COA.account_name,date:e.JornalMst.dated,doc_type:e.doc_type,debit:e.debit,credit:e.credit,remarks:e.remarks||""})});let i=u.filter(t=>t.account_code.toLowerCase().includes(e.toLowerCase())||t.account_name.toLowerCase().includes(e.toLowerCase()));i.sort((e,t)=>e.account_code!==t.account_code?e.account_code.localeCompare(t.account_code):new Date(e.date)-new Date(t.date));let s=[],l={};return i.forEach(e=>{l[e.account_code]||(l[e.account_code]=0),l[e.account_code]+=e.debit-e.credit,s.push({...e,balance:l[e.account_code]})}),s}async function E(){return{sale:await d.default.Purchase.count({where:{doc_type:"SV"}}),purchase:await d.default.Purchase.count({where:{doc_type:"PV"}}),product:await d.default.Product.count()}}async function V(){let e=await d.default.Purchase.groupBy({by:["product_code"],where:{doc_type:"PV"},_sum:{quantity:!0}}),t=await d.default.Purchase.groupBy({by:["product_code"],where:{doc_type:"SV"},_sum:{quantity:!0}}),a={};for(let e of t)a[e.product_code]=e._sum.quantity||0;let c=[];for(let t of e){let e=await d.default.Product.findUnique({where:{product_code:t.product_code}}),r=(t._sum.quantity||0)-(a[t.product_code]||0);r<5&&c.push({item_code:t.product_code,item_name:e?.product_name||"",Stock:r,doc_type:"Stock"})}return c}async function q(e){await d.default.User.create({data:{name:e.get("name"),password:await n.default.hash(e.get("password"),10)}})}(0,u.ensureServerEntryExports)([s,l,f,_,p,y,h,m,w,P,g,M,A,I,C,O,D,J,x,k,$,F,S,E,V,q]),(0,c.createActionProxy)("cb4f4b774b9d88b3c534434328e16fcbad7a9269",s),(0,c.createActionProxy)("6ca0d13716ec2e1de55299573eab2a5058b37b08",l),(0,c.createActionProxy)("0f43a19a198e50d66f8812d5c82ec5ce51a2f043",f),(0,c.createActionProxy)("42fa3d8a19af81e5b592d3f23d853b67b72711d9",_),(0,c.createActionProxy)("e96912272c67976ddd4249bc8ffb96d731a7bf50",p),(0,c.createActionProxy)("8dc13c579d855e7071caf38e0aca70c0929d46eb",y),(0,c.createActionProxy)("c93ab26931ca5734d5e62318905e2804181cb60a",h),(0,c.createActionProxy)("4c809af6775a8bcc983e051c557925a929b83421",m),(0,c.createActionProxy)("f2b90191f662ed14e70f2489c6a5fa375a55291d",w),(0,c.createActionProxy)("f52e47321e04054eca09b13a02ffa54c11e5ff02",P),(0,c.createActionProxy)("b93a02faedcd35fa57d2264e59e1e5410f2f7040",g),(0,c.createActionProxy)("f5b6016afb0036b672a9f51a7dabee39e721b800",M),(0,c.createActionProxy)("d471c79f1681404af2366afb867205d40261192f",A),(0,c.createActionProxy)("af28085dac97ece90a9b47c2b651a736367cd566",I),(0,c.createActionProxy)("382cffa6fab359d0e100dfc1f8ca2ce0d621a801",C),(0,c.createActionProxy)("c581f3dd1f7d38ed7cae01b669acf535a04e3572",O),(0,c.createActionProxy)("4e687357918295a68f0b3d1b4d5434d1c3f82501",D),(0,c.createActionProxy)("52c194031b9970623c85b0a24c424c974c8cefec",J),(0,c.createActionProxy)("51ce2a1c9289abbc06b012664d6a439ad3deb4e6",x),(0,c.createActionProxy)("11a235eb1d04e541768b31e6f21a7d7a17a567a9",k),(0,c.createActionProxy)("134ebd23ed5d7398731a79af0c130c1ba5e720b1",$),(0,c.createActionProxy)("c18c8b12a7e0de24f9d14dfe249593a85ff347b9",F),(0,c.createActionProxy)("09a35ed028ace98a546c7941d82389dedd03aca0",S),(0,c.createActionProxy)("da7ec353ccbd534acbfb4a33d31ef910814f3f10",E),(0,c.createActionProxy)("39c789efd65e411bdad465608ed5b232e577a748",V),(0,c.createActionProxy)("091d73d95320b036c57ef7d96d5e05ab7311a613",q)},3384:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,metadata:()=>o});var c=a(5036),d=a(2842),r=a.n(d);a(7272);let o={title:"FoodieHub - Food Delivery App",description:"Order your favorite food online"};function n({children:e}){return c.jsx("html",{lang:"en",children:c.jsx("body",{className:r().className,children:c.jsx("div",{className:"pt-20",children:e})})})}},1903:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});let c=new(a(3524)).PrismaClient},7272:()=>{}};